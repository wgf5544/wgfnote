## 消息处理

* 在脚本的执行过程中，有时候需要将信息同时输出到文件并显示到控制台，采用输出重定向可以实现，但是需要两次输出重定向。可以通过命令tee实现上述的功能，但是需要通过管道命令，如下格式。

        $ cat file08 | tee file16
        1501010001	71.05 2141618	3 07/11/15 21:46:57 1006 User001	109	4	303
        1501010002	865.86 1686831	2 05/11/15 03:52:44 1009 User009	109	1	302
        1501010003	652.61 2587675	2 07/14/15 19:17:39 1010 User003	110	1	305
        1501010004	905.24 1282788	1 04/17/15 17:14:09 1010 User004	102	3	304
        1501010005	444.25 1624680	1 04/05/15 11:40:51 1005 User009	108	1	308
        $ cat file16
        1501010001	71.05 2141618	3 07/11/15 21:46:57 1006 User001	109	4	303
        1501010002	865.86 1686831	2 05/11/15 03:52:44 1009 User009	109	1	302
        1501010003	652.61 2587675	2 07/14/15 19:17:39 1010 User003	110	1	305
        1501010004	905.24 1282788	1 04/17/15 17:14:09 1010 User004	102	3	304
        1501010005	444.25 1624680	1 04/05/15 11:40:51 1005 User009	108	1	308
        $ ls -l | tee file16
        总用量 616
        -rwxrw-r--. 1 hadoop01 hadoop01   126 7月  26 17:46 bash04.sh
        -rwxrw-r--. 1 hadoop01 hadoop01   535 7月  27 11:19 bash05.sh
        -rwxrw-r--. 1 hadoop01 hadoop01   125 7月  27 13:25 bash06.sh
        -rwxrw-r--. 1 hadoop01 hadoop01   136 7月  27 15:23 bash07.sh
        …
        $ cat file16
        总用量 616
        -rwxrw-r--. 1 hadoop01 hadoop01   126 7月  26 17:46 bash04.sh
        -rwxrw-r--. 1 hadoop01 hadoop01   535 7月  27 11:19 bash05.sh
        -rwxrw-r--. 1 hadoop01 hadoop01   125 7月  27 13:25 bash06.sh
        -rwxrw-r--. 1 hadoop01 hadoop01   136 7月  27 15:23 bash07.sh
        …
        $ date | tee file16
        2018年 07月 08日 星期日 11:41:13 CST
        $ cat file16
        2018年 07月 08日 星期日 11:41:13 CST

* 需要注意的是tee命令需要使用管道命令，在输入到文件中的同时输出到控制台。另外，tee命令向文件中输出的内容会覆盖之前的内容，如果需要将输出信息追加到文件中，需要使用参数-a，如下。

        $ date | tee file16
        2018年 07月 08日 星期日 11:48:27 CST
        $ cat file16
        2018年 07月 08日 星期日 11:48:27 CST
        $ date | tee -a file16
        2018年 07月 08日 星期日 11:48:42 CST
        $ cat file16
        2018年 07月 08日 星期日 11:48:27 CST
        2018年 07月 08日 星期日 11:48:42 CST
   
   * 使用这种方法，在脚本中可以实现双向输出，既输出到文件又输出到控制台，下面通过一个简单的例子说明。例：bash107.sh：

              #!/bin/bash
              # 在当前目录下创建一个临时文件
              filename=`mktemp tempXXX`
              # 输出信息到文件并输出到控制台
              echo "This is first test!" | tee $filename
              echo "This is second test!" | tee -a $filename
              echo "This is third test!" | tee -a $filename

              echo "Contents of to temp file: "
              cat $filename
              # 删除临时文件
              rm -f $filename 2> /dev/null

    * 使用命令tee可以将信息保存一份并显示到控制台，在脚本中常用的方式。

